
## コーディングルール
 
このコーディングルールに従っているかをチェックすること。
* **anyは使わない**

  * 対象は **`std::any` 禁止** の意味、と明記してください。
  * 代替: 具体型／`std::variant`／テンプレートで表現。レビューは `[必須]`（型安全性）で指摘。

* **命名**

  * 型／クラス名: `UpperCamel`、関数・変数: `lowerCamel` を「ファイル全域で統一」。
  * 定数は `kUpperCamel`（例: `kMaxSize`）を推奨（衝突回避・視認性）。
  * テスト用の fixture, matcher も命名規約の例外にしない（統一が楽）。

* **予約識別子（アンダースコア関連）**

  * 「アンダースコア＋大文字で始まる名前」「連続する二つのアンダースコア」は**予約**なので**全面禁止**。
  * **大域（グローバル）名前空間でアンダースコア始まり**も**禁止**（標準予約）。
  * これらは\*\*`[必須]`違反\*\*として扱い、機械検出を必須化（後述）。

* **std 名前空間**

  * **`namespace std { ... }` での追加・変更は禁止（未定義動作）**。
  * ただし標準が許容する**ユーザー定義型に対する既存テンプレートの**明示的**特殊化**（例: `std::hash<MyType>`、`std::formatter<MyType>`）は可。
  * 可否を規約に明文化（「フル特殊化のみ可・部分特殊化不可」など）。

* **引数は 3～5 個を目安**

  * 6 個以上は**構造体に束ねる** or **Builder** を推奨（レビューは `[推奨]`）。
  * 「可変長引数」「多数の bool 引数」も原則禁止。意味不明瞭なら `[必須]` で差戻し。

* **モジュール化（infra_shared/**）**

  * **複数モジュールから使う可能性のある処理は** `infra_shared/<機能区分>/` に配置。
  * インタフェースは最小依存（PIMPL/前方宣言）＋ **安定 ABI/ヘッダ** を意識。
  * CMake は `infra_shared_*` を**静的ライブラリ**に分離し、**依存の向き**（アプリ→shared）を厳守。

<!-- for GitHub Copilot review rule -->
 
[必須]: セキュリティ、バグ、重大な設計問題
[推奨]: パフォーマンス改善、可読性向上
[提案]: より良い実装方法の提案
[質問]: 実装意図の確認
[Nits]: 細かな修正（typo、フォーマットなど）
 
<!-- for GitHub Copilot review rule-->